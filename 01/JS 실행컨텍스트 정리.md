실행컨텍스트는 코드가 실행되는 환경을 의미함
코드가 어떻게 실행되며, 데이터에 어떻게 접근하는지, 그리고 특정 변수와 함수가 어떻게 동작하는지를 결정하는 중요한 개념임

### 실행컨텍스트의 종류
실행컨텍스트의 종류에는 전역 실행 컨텍스트, 함수 실행 컨텍스트, eval 실행 컨텍스트가 있음

1. **전역 실행 컨텍스트**는 코드 실행이 시작될 때 생성되며, 프로그램이 종료 될 때 까지 유지됨

2. **함수 실행 컨텍스트**는 함수가 호출될 때마다 함수별로 독립적인 실행 컨텍스트가 생성되며 함수 실행이 완료되면 해당 컨텍스트는 사라짐

3. eval 실행 컨텍스트는 eval()함수가 호출될때 생성되지만 일반적으로 자주 사용되지 않는다고함

### 실행컨텍스트의 구조
1. **환경레코드** : 실행 컨텍스트 내에서 선언된 변수와 함수를 저장하고 관리함
함수나 블록 스코프 내에서 선언된 모든 변수, 함수, 상수들이 여기에 저장됨
실행 중에 해당 컨텍스트 내에서 선언된 변수나 함수에 접근할 수 있는 정보를 기억함

2. **외부 렉시컬 환경 참조** : 현재 실행 컨텍스트 밖의 스코프, 즉 상위 컨텍스트를 참조할 수 있도록 연결해 주는 역할을 함
함수가 내부에서 선언된 경우, 그 함수가 선언될 당시의 외부 실행 컨텍스트를 기억하고, 필요할 때 상위 스코프의 변수나 함수에 접근할 수 있음
이때 상위 실행 컨텍스트의 환경 레코드에 접근할 수 있도록 외부의 것을 바인딩하여 사용함



### 실행 컨텍스트의 생성, 실행 및 종료 과정
실행 컨텍스트는 생성 단계와 실행 단계 그리고 종료단계가 나뉘어 생성됨

#### 1. 생성 단계 : 
변수, 함수 선언이 메모리에 저장됨. 이때 var는 undefined로 초기화되고 let과 const는 초기화는 되지 않음. 그리고 변수와 함수 선언문의 호이스팅이 발생함. 이때 호이스팅이 발생하는 이유는 선언문이 있는 코드라인을 최상단으로 물리적으로 끌어올린게 아니라, JS엔진이 먼저 전체코드를 스캔하면서 변수같은 정보를 실행콘텍스트의 환경레코드에 미리 기록해 놓기 때문임

#### 2. 실행 단계: 

(1).생성 단계에서 undefined로 초기화된 var 변수와 일시적 사각지대(TDZ)에 있는 let 및 const 변수들이 실제로 값을 할당받기 시작함.



(2). **코드 실행**: 코드가 순차적으로 실행됨 함수 호출이 발생하면 새로운 실행 컨텍스트가 생성되고, 호출된 함수 내부의 코드가 실행됨
함수가 실행될 때마다 해당 함수에 대한 새로운 실행 컨텍스트가 생성되어 스택에 쌓이고, 함수 실행이 완료되면 스택에서 제거됨

#### 3. 정리 및 함수 종료
함수가 실행되면 해당 함수의 실행 컨텍스트는 스택에서 제거됨
하지만 **클로저(closure)**와 같이 외부함수가 종료된 후에도 외부에서 참조하고 있는 변수나 함수가 있으면 해당 변수들은 메모리에 계속 남아 있게됨


![](https://velog.velcdn.com/images/smm45108/post/b179a850-434c-4e1e-b9d8-a93a4351f965/image.png)



___
사진출처 : https://chanhuiseok.github.io/posts/js-4/

